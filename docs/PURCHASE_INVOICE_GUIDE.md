# ๐ฆ ูุธุงู ูุงุชูุฑุฉ ุงูุดุฑุงุก ุงููุชูุงูู - ุฏููู ุงููุณุชุฎุฏู

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 12 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ **ุดุงุดุฉ ูุงุชูุฑุฉ ุดุฑุงุก ูุชูุงููุฉ** ุชุฌูุน ุจูู:
- โ **ูุณุญ ุงูุจุงุฑููุฏ ุงูุชููุงุฆู** ูุฅุถุงูุฉ ุงูุฃุตูุงู
- โ **ุฅุฏุฎุงู ูุฏูู** ูุจุฏูู
- โ **ุฌุฏูู ุชูุตููู** ูุนุฑุถ ุฌููุน ุชูุงุตูู ุงูุฃุตูุงู
- โ **ุฎูุงุฑุงู ูุฅุฏุฎุงู ุงูุฃุณุนุงุฑ:**
  - ุฅุฏุฎุงู ุณุนุฑ ูู ุตูู ุนูู ุญุฏุฉ
  - ุฅุฏุฎุงู ูุจูุบ ุงููุงุชูุฑุฉ ุงูููู ูุน ุชูุฒูุน ุชููุงุฆู
- โ **ุญุณุงุจ ุชููุงุฆู:** ุงูุชูููุฉ = (ุณุนุฑ ุงูุฐูุจ ููุนูุงุฑ + ุฃุฌุฑุฉ ุงููุตูุนูุฉ/ุฌุฑุงู) ร ุงููุฒู

---

## ๐ง ุงูุชุทููุฑุงุช ูู Backend

### 1. **ูููุฐุฌ ุงูุจูุงูุงุช (models.py)**

ุชู ุฅุถุงูุฉ ุญูู ุฌุฏูุฏ ูุฌุฏูู `Item`:

```python
manufacturing_wage_per_gram = db.Column(db.Float, default=0.0, nullable=True)
```

ูุฐุง ุงูุญูู ูุฎุฒู **ุฃุฌุฑุฉ ุงููุตูุนูุฉ ููุฌุฑุงู ุงููุงุญุฏ** ููู ุตูู.

### 2. **API Endpoints ุงูุฌุฏูุฏุฉ**

#### ๐ ุงูุจุญุซ ุจุงูุจุงุฑููุฏ
```
GET /api/items/search/barcode/<barcode>
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "id": 1,
  "item_code": "I-000001",
  "name": "ุญูู",
  "barcode": "YAS000001",
  "karat": 21,
  "weight": 5.5,
  "manufacturing_wage_per_gram": 15.0,
  "price": 1250.0
}
```

### 3. **ุชุญุฏูุซ GET /api/items**

ุงูุขู ููุฑุฌุน `manufacturing_wage_per_gram` ูุน ูู ุตูู.

### 4. **Migration Script**

ุชู ุฅูุดุงุก `add_manufacturing_wage_column.py` ูุฅุถุงูุฉ ุงูุญูู ุงูุฌุฏูุฏ:

```bash
cd backend
source venv/bin/activate
python add_manufacturing_wage_column.py
```

**ุงููุชูุฌุฉ:**
```
โ ุชู ุฅุถุงูุฉ ุงูุญูู ุจูุฌุงุญ!
```

---

## ๐ฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Flutter)

### ๐ ุงูููู ุงูุฌุฏูุฏ

**ุงููุณุงุฑ:** `frontend/lib/screens/purchase_invoice_screen.dart`

**ุนุฏุฏ ุงูุฃุณุทุฑ:** ~780 ุณุทุฑ

### โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

#### 1๏ธโฃ **ูุณุญ ุงูุจุงุฑููุฏ**

- **ุฒุฑ ูู AppBar:** ููุชุญ ูุงููุฑุง ุงููุงุณุญ
- **ุนูุฏ ูุฑุงุกุฉ ุงูุจุงุฑููุฏ:**
  1. ุงูุจุญุซ ุงูุชููุงุฆู ุนู ุงูุตูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  2. ุนุฑุถ ูุงูุฐุฉ ูุฅุฏุฎุงู: ุงููุฒูุ ุงููููุฉุ ุฃุฌุฑุฉ ุงููุตูุนูุฉ
  3. ุฅุถุงูุฉ ุงูุตูู ููุฌุฏูู ููุฑุงู

#### 2๏ธโฃ **ุงูุฌุฏูู ุงูุชูุตููู**

| ุงูุนููุฏ | ุงููุตู |
|--------|-------|
| # | ุงูุชุฑุชูุจ |
| ุงูุฑูู | `item_code` (I-000001) |
| ุงูุงุณู | ุงุณู ุงูุตูู |
| ุงูุนูุงุฑ | 21ุ 18ุ ุฅูุฎ |
| ุงููุฒู | ุจุงูุฌุฑุงู |
| ุงูุนุฏุฏ | ุงููููุฉ |
| ุณุนุฑ/ุฌุฑุงู | `unit_cost` ุงููุญุณูุจ |
| ุงูุชูููุฉ | ุณุนุฑ/ุฌุฑุงู ร ุงููุฒู |
| ุงูุตุงูู | ุงูุฅุฌูุงูู ูุจู ุงูุถุฑูุจุฉ |
| ุงูุถุฑูุจุฉ | 15% |
| ุงูุฅุฌูุงูู | ุงูุตุงูู + ุงูุถุฑูุจุฉ |

#### 3๏ธโฃ **ุฎูุงุฑุงุช ุฅุฏุฎุงู ุงูุฃุณุนุงุฑ**

**SegmentedButton ูู ุฃุนูู ุงูุดุงุดุฉ:**

- **๐ ูุฏูู:** ุนูุฏ ุฅุถุงูุฉ ุตููุ ูููู:
  - ุชุฑู ุญูู "ุฅุฌูุงูู ุณุนุฑ ุงูุตูู" ูุงุฑุบุงู โ ุญุณุงุจ ุชููุงุฆู
  - ุฅุฏุฎุงู ุงูุณุนุฑ ูุฏููุงู โ ุงุณุชุฎุฏุงู ุงููููุฉ ุงููุฏุฎูุฉ

- **๐ช ุชูุฒูุน ุชููุงุฆู:**
  1. ุฅุฏุฎุงู **ูุจูุบ ุงููุงุชูุฑุฉ ุงูููู** (ุดุงูู ุงูุถุฑูุจุฉ)
  2. ุงูุถุบุท ุนูู ุฒุฑ "ุญุณุงุจ"
  3. ูุชู ุงูุชูุฒูุน ุจูุงุกู ุนูู **ูุณุจุฉ ุงููุฒู** ููู ุตูู

#### 4๏ธโฃ **ูุนุงุฏูุฉ ุงูุญุณุงุจ**

```
ุณุนุฑ ุงูุฐูุจ ููุนูุงุฑ = (ุณุนุฑ ุงูุฐูุจ ุนูุงุฑ 24 ร ุนูุงุฑ ุงูุตูู) รท 24

ุณุนุฑ ุงููุญุฏุฉ (ููุฌุฑุงู) = ุณุนุฑ ุงูุฐูุจ ููุนูุงุฑ + ุฃุฌุฑุฉ ุงููุตูุนูุฉ/ุฌุฑุงู

ุงูุชูููุฉ ุงูุตุงููุฉ = ุณุนุฑ ุงููุญุฏุฉ ร ุงููุฒู ร ุงููููุฉ

ุงูุถุฑูุจุฉ = ุงูุชูููุฉ ุงูุตุงููุฉ ร 0.15

ุงูุฅุฌูุงูู = ุงูุชูููุฉ ุงูุตุงููุฉ + ุงูุถุฑูุจุฉ
```

#### 5๏ธโฃ **ูุณู ุงูููุฎุต (Summary)**

ูุนุฑุถ ูู ุฃุณูู ุงูุดุงุดุฉ:
- โ ุฅุฌูุงูู ุงููุฒู (ุฌุฑุงู)
- โ ุงูุตุงูู (ูุจู ุงูุถุฑูุจุฉ)
- โ ุงูุถุฑูุจุฉ (15%)
- โ **ุงูุฅุฌูุงูู** (ุจุฎุท ุนุฑูุถ ูุฐูุจู)

#### 6๏ธโฃ **ุญูุธ ุงููุงุชูุฑุฉ**

- **ุฒุฑ Save ูู AppBar**
- ูููุดุฆ ูุงุชูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุงูููุฏ ุงููุญุงุณุจู
- **ุฑุณุงูุฉ ูุฌุงุญ** ุชุนุฑุถ ุฑูู ุงููุงุชูุฑุฉ

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ๐น ุงูุฎุทูุงุช

1. **ูุชุญ ุงูุดุงุดุฉ:**
   - ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ โ ุฒุฑ "ูุงุชูุฑุฉ ุดุฑุงุก" (ุฐูุจู)

2. **ุฅุถุงูุฉ ุตูู:**
   - **ุงูุทุฑููุฉ 1 (ุจุงุฑููุฏ):**
     1. ุงุถุบุท ุนูู ุฃููููุฉ ุงููุงุณุญ ๐ท
     2. ุงูุณุญ ุจุงุฑููุฏ ุงูุตูู
     3. ุฃุฏุฎู ุงููุฒู ูุงููููุฉ ูุฃุฌุฑุฉ ุงููุตูุนูุฉ
     4. ุงุถุบุท "ุฅุถุงูุฉ"
   
   - **ุงูุทุฑููุฉ 2 (ูุฏูู):**
     1. ุงุถุบุท FAB "ุฅุถุงูุฉ ุตูู"
     2. ุฃุฏุฎู ุงูุชูุงุตูู ูุฏููุงู

3. **ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฃุณุนุงุฑ:**
   - **ูุฏูู:** ุงุชุฑู ุงูุณุนุฑ ูุงุฑุบุงู ุฃู ุฃุฏุฎูู
   - **ุชูุฒูุน:** ุฃุฏุฎู ุงููุจูุบ ุงูููู โ ุงุถุบุท ุฒุฑ ุงูุญุณุงุจ ๐งฎ

4. **ูุฑุงุฌุนุฉ ุงูุฌุฏูู:**
   - ุชุญูู ูู ุงูุฃุตูุงู ูุงูุฃุณุนุงุฑ
   - ุงุญุฐู ุฃู ุตูู ุจุฒุฑ ๐๏ธ

5. **ุงูุญูุธ:**
   - ุงุถุบุท ุฒุฑ Save ูู AppBar
   - ุณุชุธูุฑ ุฑุณุงูุฉ ุจูุฌุงุญ ุงูุนูููุฉ ูุฑูู ุงููุงุชูุฑุฉ

---

## ๐ ูุซุงู ุนููู

### ุงูุณููุงุฑูู

ุดุฑุงุก 3 ุฃุตูุงู ูู ููุฑุฏ:

| ุงูุตูู | ุงูุนูุงุฑ | ุงููุฒู | ุงููููุฉ | ุฃุฌุฑุฉ ุงููุตูุนูุฉ |
|-------|--------|-------|--------|---------------|
| ุญูู | 21 | 5.0 | 2 | 20 ุฑูุงู/ุฌุฑุงู |
| ุฎุงุชู | 18 | 3.5 | 1 | 15 ุฑูุงู/ุฌุฑุงู |
| ุฃุณูุงุฑุฉ | 21 | 12.0 | 1 | 25 ุฑูุงู/ุฌุฑุงู |

**ุณุนุฑ ุงูุฐูุจ ุงูููู:**
- ุนูุงุฑ 24: 250 ุฑูุงู/ุฌุฑุงู
- ุนูุงุฑ 21: 218.75 ุฑูุงู/ุฌุฑุงู
- ุนูุงุฑ 18: 187.5 ุฑูุงู/ุฌุฑุงู

### ุงูุญุณุงุจุงุช

#### ุตูู 1: ุญูู
```
ุณุนุฑ ุงููุญุฏุฉ = 218.75 + 20 = 238.75 ุฑูุงู/ุฌุฑุงู
ุงูุชูููุฉ ุงูุตุงููุฉ = 238.75 ร 5.0 ร 2 = 2,387.50 ุฑูุงู
ุงูุถุฑูุจุฉ = 2,387.50 ร 0.15 = 358.13 ุฑูุงู
ุงูุฅุฌูุงูู = 2,745.63 ุฑูุงู
```

#### ุตูู 2: ุฎุงุชู
```
ุณุนุฑ ุงููุญุฏุฉ = 187.5 + 15 = 202.5 ุฑูุงู/ุฌุฑุงู
ุงูุชูููุฉ ุงูุตุงููุฉ = 202.5 ร 3.5 ร 1 = 708.75 ุฑูุงู
ุงูุถุฑูุจุฉ = 708.75 ร 0.15 = 106.31 ุฑูุงู
ุงูุฅุฌูุงูู = 815.06 ุฑูุงู
```

#### ุตูู 3: ุฃุณูุงุฑุฉ
```
ุณุนุฑ ุงููุญุฏุฉ = 218.75 + 25 = 243.75 ุฑูุงู/ุฌุฑุงู
ุงูุชูููุฉ ุงูุตุงููุฉ = 243.75 ร 12.0 ร 1 = 2,925.00 ุฑูุงู
ุงูุถุฑูุจุฉ = 2,925.00 ร 0.15 = 438.75 ุฑูุงู
ุงูุฅุฌูุงูู = 3,363.75 ุฑูุงู
```

### ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

```
ุฅุฌูุงูู ุงููุฒู: 23.5 ุฌุฑุงู
ุงูุตุงูู: 6,021.25 ุฑูุงู
ุงูุถุฑูุจุฉ: 903.19 ุฑูุงู
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุงูุฅุฌูุงูู: 6,924.44 ุฑูุงู
```

---

## ๐ ุงูุชูุฒูุน ุงูุชููุงุฆู

ุฅุฐุง ููุช ุชุนุฑู **ุงููุจูุบ ุงูุฅุฌูุงูู ููุท** (ูุซูุงู ูู ูุงุชูุฑุฉ ุงูููุฑุฏ):

### ุงูุฎุทูุงุช

1. ุฃุถู ุฌููุน ุงูุฃุตูุงู **ุจุฏูู** ุฅุฏุฎุงู ุงูุฃุณุนุงุฑ
2. ุงุฎุชุฑ ูุถุน "ุชูุฒูุน ุชููุงุฆู"
3. ุฃุฏุฎู ุงููุจูุบ ุงูููู: `7,000 ุฑูุงู`
4. ุงุถุบุท ุฒุฑ ุงูุญุณุงุจ

### ูุง ูุญุฏุซ

```
ุงููุจูุบ ูุจู ุงูุถุฑูุจุฉ = 7,000 รท 1.15 = 6,086.96 ุฑูุงู

ุงูุชูุฒูุน ุญุณุจ ุงููุฒู:
- ุญูู (10 ุฌุฑุงู): 42.55% โ 2,590.70 ุฑูุงู
- ุฎุงุชู (3.5 ุฌุฑุงู): 14.89% โ 906.35 ุฑูุงู
- ุฃุณูุงุฑุฉ (12 ุฌุฑุงู): 42.55% โ 2,589.91 ุฑูุงู
```

ูุชู ุชุญุฏูุซ ุงูุฌุฏูู ุชููุงุฆูุงู ุจุงูุฃุณุนุงุฑ ุงูุฌุฏูุฏุฉ!

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ูุงูุชูููู

### ๐ง Backend

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `backend/models.py` โ ุญูู `manufacturing_wage_per_gram`
- `backend/routes.py` โ endpoint ุฌุฏูุฏ ููุจุญุซ ุจุงูุจุงุฑููุฏ
- `backend/api_service.dart` โ ุฏุงูุฉ `searchItemByBarcode()`

**ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
-- ุงูุญูู ุงูุฌุฏูุฏ
ALTER TABLE item ADD COLUMN manufacturing_wage_per_gram REAL DEFAULT 0.0;
```

### ๐ฑ Frontend

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `frontend/lib/screens/purchase_invoice_screen.dart` โ ุงูุดุงุดุฉ ุงูุฌุฏูุฏุฉ (ุฌุฏูุฏ)
- `frontend/lib/api_service.dart` โ ุฏุงูุฉ ุงูุจุญุซ (ุฅุถุงูุฉ)
- `frontend/lib/screens/home_screen.dart` โ ุฒุฑ ุงููุตูู ุงูุณุฑูุน (ุชุญุฏูุซ)

**ุงูุชุจุนูุงุช:**
- `mobile_scanner: ^5.2.3` โ ููุณุญ ุงูุจุงุฑููุฏ
- `http` โ ููุงุชุตุงู ุจุงูู API

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ "ุงูุตูู ุบูุฑ ููุฌูุฏ"

**ุงูุณุจุจ:** ุงูุจุงุฑููุฏ ุบูุฑ ูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุตูู ุฃููุงู ุนุจุฑ "ุดุงุดุฉ ุงูุฃุตูุงู"
2. ุชุญูู ูู ุตุญุฉ ุงูุจุงุฑููุฏ ุงููุทุจูุน

### โ "ูุฌุจ ุฅุถุงูุฉ ุตูู ูุงุญุฏ ุนูู ุงูุฃูู"

**ุงูุณุจุจ:** ูุญุงููุฉ ุญูุธ ูุงุชูุฑุฉ ูุงุฑุบุฉ.

**ุงูุญู:** ุฃุถู ุตููุงู ูุงุญุฏุงู ุนูู ุงูุฃูู ูุจู ุงูุญูุธ.

### โ "ุฅุฌูุงูู ุงูุฃูุฒุงู ุตูุฑ"

**ุงูุณุจุจ:** ุฌููุน ุงูุฃุตูุงู ููุง ูุฒู = 0.

**ุงูุญู:** ุชุฃูุฏ ูู ุฅุฏุฎุงู ุฃูุฒุงู ุตุญูุญุฉ ุนูุฏ ุฅุถุงูุฉ ุงูุฃุตูุงู.

---

## ๐ ุงููุฒุงูุง ูุงูููุงุฆุฏ

โ **ุชูููุฑ ุงูููุช:** ูุณุญ ุจุงุฑููุฏ ุจุฏูุงู ูู ุงูุฅุฏุฎุงู ุงููุฏูู  
โ **ุฏูุฉ ุนุงููุฉ:** ุญุณุงุจุงุช ุชููุงุฆูุฉ ุชููุน ุงูุฃุฎุทุงุก  
โ **ูุฑููุฉ:** ุฎูุงุฑุงู ููุฃุณุนุงุฑ (ูุฏูู/ุชูุฒูุน)  
โ **ุดูุงููุฉ:** ุฌุฏูู ุชูุตููู ูุนุฑุถ ูู ุดูุก  
โ **ูุญุงุณุจุฉ ุชููุงุฆูุฉ:** ูููุฏ ุชููุดุฃ ูุจุงุดุฑุฉ  

---

## ๐ฎ ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู)

- โ ุฅุถุงูุฉ **ุทุจุงุนุฉ ุงููุงุชูุฑุฉ** ุจุชูุณูู ุงุญุชุฑุงูู
- โ **ุฑุจุท ุจุงูููุฑุฏูู:** ุงุฎุชูุงุฑ ููุฑุฏ ูููุงุชูุฑุฉ
- โ **ุชูุงุฑูุฑ:** ุชูุฑูุฑ ุดุงูู ุจููุงุชูุฑ ุงูุดุฑุงุก ููุชุฑุฉ ูุนููุฉ
- โ **ุงูุชุตุฏูุฑ:** ุชุตุฏูุฑ ุงูููุงุชูุฑ ุฅูู Excel/PDF
- โ **ุงูุฅุดุนุงุฑุงุช:** ุชูุจูู ุนูุฏ ุงูุฎูุงุถ ุงููุฎุฒูู

---

## ๐ ุงูุฏุนู

ููุงุณุชูุณุงุฑุงุช ุฃู ุงููุดุงูู:
- **ุงููููุงุช ุงูุฃุณุงุณูุฉ:**
  - Backend: `backend/routes.py`, `backend/models.py`
  - Frontend: `frontend/lib/screens/purchase_invoice_screen.dart`
  
- **ุงูุณุฌูุงุช (Logs):**
  - Backend: `backend/server.log`
  - Flutter: ุงุณุชุฎุฏู `flutter run` ูู Terminal

---

**ุชู ุจูุฌุงุญ! โจ**  
ูุธุงู ูุงุชูุฑุฉ ุงูุดุฑุงุก ุฌุงูุฒ ููุงุณุชุฎุฏุงู.
