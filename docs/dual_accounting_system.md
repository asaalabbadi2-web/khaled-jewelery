# ุงููุธุงู ุงููุญุงุณุจู ุงููุฒุฏูุฌ ููุฐูุจ (ููุฏ + ูุฒู)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุนุฏูู ูุธุงู ุงููููุฏ ุงููุญุงุณุจูุฉ ููุชุจุน **ุงููุธุงู ุงููุฒุฏูุฌ** ุงูุฐู ููุตู ุจูู ุญุฑูุฉ **ุงูููุฏ** ูุญุฑูุฉ **ุงููุฒู** ุจุงุณุชุฎุฏุงู **ุญุณุงุจุงุช ููุงุจูุฉ (Contra Accounts)**.

---

## ๐ ุงูููููู ุงูุฃุณุงุณู

### ุงูุญุณุงุจุงุช ุงูููุงุจูุฉ:
1. **ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ** (ุญุณุงุจ 55 - ุฑูู 400)
   - ูุญูู **ุงูููุฏ** (ุฏุงุฆู) + **ุงููุฒู** (ูุฏูู)
   - **ููุณ ุญุณุงุจ ุฅูุฑุงุฏุงุช ุชูููุฏู**ุ ุจู ุญุณุงุจ ููุงูุถุฉ

2. **ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ** (ุญุณุงุจ 95 - ุฑูู 431)
   - ูุญูู **ุงูููุฏ** (ูุฏูู) + **ุงููุฒู** (ุฏุงุฆู)
   - **ููุณ ูุตุฑูู ุชุดุบููู**ุ ุจู ุญุณุงุจ ููุงูุถุฉ

---

## ๐ ุงููููุฏ ุงููุญุงุณุจูุฉ

### ๐ข ูุงุชูุฑุฉ ุจูุน (400 ุฑ.ุณุ 1 ุฌุฑุงู ุนูุงุฑ 24):

#### ุงูููุฏ ุงูุฃูู: ุญุฑูุฉ ุงูููุฏ
```
400 ุฑ.ุณ  ูู ุญู/ ุงูููุฏูุฉ (ุฃู ูุณููุฉ ุงูุฏูุน)        [ูุฏูู ููุฏ]
              ุฅูู ุญู/ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ          [ุฏุงุฆู ููุฏ]
```

#### ุงูููุฏ ุงูุซุงูู: ุญุฑูุฉ ุงููุฒู
```
1 ุฌู     ูู ุญู/ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ              [ูุฏูู ูุฒู]
              ุฅูู ุญู/ ูุฎุฒูู ุงูุฐูุจ ุนูุงุฑ 24           [ุฏุงุฆู ูุฒู]
```

**ุงููุชูุฌุฉ:**
- ุงูููุฏูุฉ: +400 ุฑ.ุณ (ุงูุตูุฏูู ุฒุงุฏ)
- ุงููุฎุฒูู: -1 ุฌู ุนูุงุฑ 24 (ุงูุฐูุจ ููุต)
- ุญุณุงุจ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ: **ูุชูุงุฒู** (400 ุฏุงุฆู ููุฏุ 1 ุฌู ูุฏูู ูุฒู)

---

### ๐ด ูุงุชูุฑุฉ ุดุฑุงุก ูุณุฑ (300 ุฑ.ุณุ 1 ุฌุฑุงู ุนูุงุฑ 24):

#### ุงูููุฏ ุงูุฃูู: ุญุฑูุฉ ุงูููุฏ
```
300 ุฑ.ุณ  ูู ุญู/ ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ        [ูุฏูู ููุฏ]
              ุฅูู ุญู/ ุงูููุฏูุฉ                      [ุฏุงุฆู ููุฏ]
```

#### ุงูููุฏ ุงูุซุงูู: ุญุฑูุฉ ุงููุฒู
```
1 ุฌู     ูู ุญู/ ูุฎุฒูู ุงูุฐูุจ ุนูุงุฑ 24            [ูุฏูู ูุฒู]
              ุฅูู ุญู/ ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ       [ุฏุงุฆู ูุฒู]
```

**ุงููุชูุฌุฉ:**
- ุงูููุฏูุฉ: -300 ุฑ.ุณ (ุงูุตูุฏูู ููุต)
- ุงููุฎุฒูู: +1 ุฌู ุนูุงุฑ 24 (ุงูุฐูุจ ุฒุงุฏ)
- ุญุณุงุจ ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ: **ูุชูุงุฒู** (300 ูุฏูู ููุฏุ 1 ุฌู ุฏุงุฆู ูุฒู)

---

## ๐ฐ ุญุณุงุจ ุงูุฑุจุญ

### ุงูุฑุจุญ ุงูููุฏู:
```
ุงูุฑุจุญ = ุงููุจูุนุงุช - ุงููุดุชุฑูุงุช
      = 400 - 300
      = 100 ุฑ.ุณ
```

### ุงูุฑุจุญ ุจุงูุฐูุจ:
```
ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก = 300 ุฑ.ุณ / 1 ุฌู = 300 ุฑ.ุณ/ุฌู

ุงูุฑุจุญ ุจุงูุฐูุจ = 100 ุฑ.ุณ / 300 ุฑ.ุณ/ุฌู
              = 0.333 ุฌู

```

**ููุงุญุธุฉ:** ุงูุฑุจุญ ุจุงูุฐูุจ **ูุชุบูุฑ** ุญุณุจ ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก ูุงูุชุณููุฑ.

---

## ๐ง ุงูุชุนุฏููุงุช ุงููููุฐุฉ

### 1. ููู `/backend/routes.py`

#### ุชุนุฏูู ูุณู ูุงุชูุฑุฉ ุงูุจูุน (ุงูุณุทุฑ ~1180):
```python
if invoice_type == 'ุจูุน':
    # ุงูุญุตูู ุนูู ุงูุญุณุงุจุงุช
    sales_gold_new_acc_id = get_account_id_for_mapping('ุจูุน', 'sales_gold_new') or 55
    
    # ุงูููุฏ ุงูุฃูู: ุงูููุฏ
    # ูู ุญู/ ุงูููุฏูุฉ โ ุฅูู ุญู/ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ (ููุฏูุฉ)
    db.session.add(JournalEntryLine(
        account_id=cash_acc_id,
        cash_debit=total_cash
    ))
    
    db.session.add(JournalEntryLine(
        account_id=sales_gold_new_acc_id,
        cash_credit=total_cash
    ))
    
    # ุงูููุฏ ุงูุซุงูู: ุงููุฒู
    # ูู ุญู/ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ (ูุฒู) โ ุฅูู ุญู/ ุงููุฎุฒูู
    for karat, weight in gold_by_karat.items():
        db.session.add(JournalEntryLine(
            account_id=sales_gold_new_acc_id,
            **{f"debit_{karat}k": weight}
        ))
        
        db.session.add(JournalEntryLine(
            account_id=inventory_accounts[karat],
            **{f"credit_{karat}k": weight}
        ))
```

#### ุชุนุฏูู ูุณู ูุงุชูุฑุฉ ุงูุดุฑุงุก (ุงูุณุทุฑ ~1323):
```python
elif invoice_type == 'ุดุฑุงุก ูู ุนููู':
    # ุงูุญุตูู ุนูู ุงูุญุณุงุจุงุช
    purchase_scrap_acc_id = get_account_id_for_mapping('ุดุฑุงุก ูู ุนููู', 'purchase_scrap') or 95
    
    # ุงูููุฏ ุงูุฃูู: ุงูููุฏ
    # ูู ุญู/ ูุดุชุฑูุงุช ุงููุณุฑ โ ุฅูู ุญู/ ุงูููุฏูุฉ
    db.session.add(JournalEntryLine(
        account_id=purchase_scrap_acc_id,
        cash_debit=total_cash
    ))
    
    db.session.add(JournalEntryLine(
        account_id=cash_acc_id,
        cash_credit=total_cash
    ))
    
    # ุงูููุฏ ุงูุซุงูู: ุงููุฒู
    # ูู ุญู/ ุงููุฎุฒูู โ ุฅูู ุญู/ ูุดุชุฑูุงุช ุงููุณุฑ (ูุฒู)
    for karat, weight in gold_by_karat.items():
        db.session.add(JournalEntryLine(
            account_id=inventory_accounts[karat],
            **{f"debit_{karat}k": weight}
        ))
        
        db.session.add(JournalEntryLine(
            account_id=purchase_scrap_acc_id,
            **{f"credit_{karat}k": weight}
        ))
```

### 2. ุฅุถุงูุฉ ุญุณุงุจุงุช ุฌุฏูุฏุฉ ูู `DEFAULT_ACCOUNTS`:
```python
DEFAULT_ACCOUNTS = {
    # ... ุงูุญุณุงุจุงุช ุงููุฏููุฉ
    
    # ๐ ุญุณุงุจุงุช ุงููุธุงู ุงููุฒุฏูุฌ (ููุฏ + ูุฒู)
    'sales_gold_new': 55,      # ูุจูุนุงุช ุฐูุจ ุฌุฏูุฏ (ุญุณุงุจ 400)
    'purchase_scrap': 95,      # ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ (ุญุณุงุจ 431)
}
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. โ **ุญุณุงุจ ูุจูุนุงุช ุงูุฐูุจ ุงูุฌุฏูุฏ** (55):
   - ููุนู: `revenue` (ูู ุงูุฌุฏูู ุงูุญุงูู)
   - ููู ููุณุชุฎุฏู ูุญุณุงุจ ููุงุจู (contra account)
   - ูุญูู ููุฏ (ุฏุงุฆู) + ูุฒู (ูุฏูู)

2. โ **ุญุณุงุจ ูุดุชุฑูุงุช ุงููุณุฑ ูุงูุชุณููุฑ** (95):
   - ููุนู: `contra_revenue` (ูู ุงูุฌุฏูู)
   - ุญุณุงุจ ููุงุจู ููุณ ูุตุฑูู ุชุดุบููู
   - ูุญูู ููุฏ (ูุฏูู) + ูุฒู (ุฏุงุฆู)

3. โ๏ธ **ุงููููุฏ ุงููุฏููุฉ**:
   - ุชู ุญุฐู ุงูููุฏ #14 ุงููุฏูู (ูุงู ูุณุชุฎุฏู ุงููุธุงู ุงูุฎุงุทุฆ)
   - ุฌููุน ุงูููุงุชูุฑ ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงููุธุงู ุงููุฒุฏูุฌ ุงูุฌุฏูุฏ

4. ๐ **ุญุณุงุจ ุงูุฑุจุญ**:
   - ุงูุฑุจุญ ุงูููุฏู: ุซุงุจุช (ุงููุจูุนุงุช - ุงููุดุชุฑูุงุช)
   - ุงูุฑุจุญ ุจุงูุฐูุจ: ูุชุบูุฑ (ูุนุชูุฏ ุนูู ูุชูุณุท ุณุนุฑ ุงูุดุฑุงุก)

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ูุงุชูุฑุฉ ุจูุน:
1. ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน: 400 ุฑ.ุณุ 1 ุฌู ุนูุงุฑ 24
2. ุงูุชุญูู ูู ุงูููุฏ ุงููุญุงุณุจู:
   - ุงูููุฏูุฉ: +400 ุฑ.ุณ (ูุฏูู)
   - ูุจูุนุงุช ุฐูุจ ุฌุฏูุฏ: 400 ุฑ.ุณ (ุฏุงุฆู ููุฏ)
   - ูุจูุนุงุช ุฐูุจ ุฌุฏูุฏ: 1 ุฌู (ูุฏูู ูุฒู)
   - ูุฎุฒูู ุนูุงุฑ 24: 1 ุฌู (ุฏุงุฆู ูุฒู)

### ุงุฎุชุจุงุฑ ูุงุชูุฑุฉ ุดุฑุงุก:
1. ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก: 300 ุฑ.ุณุ 1 ุฌู ุนูุงุฑ 24
2. ุงูุชุญูู ูู ุงูููุฏ ุงููุญุงุณุจู:
   - ูุดุชุฑูุงุช ูุณุฑ: 300 ุฑ.ุณ (ูุฏูู ููุฏ)
   - ุงูููุฏูุฉ: 300 ุฑ.ุณ (ุฏุงุฆู)
   - ูุฎุฒูู ุนูุงุฑ 24: 1 ุฌู (ูุฏูู ูุฒู)
   - ูุดุชุฑูุงุช ูุณุฑ: 1 ุฌู (ุฏุงุฆู ูุฒู)

---

## ๐ ุงูุชุงุฑูุฎ
- **ุชุงุฑูุฎ ุงูุชูููุฐ**: 15 ุฃูุชูุจุฑ 2025
- **ุงููุทูุฑ**: GitHub Copilot
- **ุงูุญุงูุฉ**: โ ููุชูู ูููุฎุชุจุฑ

