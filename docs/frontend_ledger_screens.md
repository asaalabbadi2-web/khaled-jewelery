# ุดุงุดุงุช ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงููุทูุฑุฉ - ุฏููู ุงูุงุณุชุฎุฏุงู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ุดุงุดุชูู ุฌุฏูุฏุชูู ูุฏูุชุฑ ุงูุฃุณุชุงุฐ ุชุณุชููุฏ ูู ุฌููุน ุงูููุฒุงุช ุงููุชูุฏูุฉ ูู Backend API:

1. **`general_ledger_screen_v2.dart`** - ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู ุงููุทูุฑ
2. **`account_ledger_screen.dart`** - ุฏูุชุฑ ุฃุณุชุงุฐ ูุญุณุงุจ ูุญุฏุฏ

## 1. ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู ุงููุทูุฑ

### ุงููุณุงุฑ
```
ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ โ ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู
```

### ุงูููุฒุงุช

#### โ ุงูุชุตููุฉ ุงููุชูุฏูุฉ
- **ุญุณุจ ุงูุญุณุงุจ**: ุงุฎุชูุงุฑ ุญุณุงุจ ูุญุฏุฏ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
- **ุญุณุจ ุงูุชุงุฑูุฎ**: ุชุญุฏูุฏ ูุชุฑุฉ ุฒูููุฉ (ูู ุชุงุฑูุฎ - ุฅูู ุชุงุฑูุฎ)
- **ุงูุฃุฑุตุฏุฉ ุงูุชุฑุงูููุฉ**: ุชูุนูู/ุชุนุทูู ุนุฑุถ ุงูุฃุฑุตุฏุฉ
- **ุชูุงุตูู ุงูุฃุนูุฑุฉ**: ุนุฑุถ ุชูุฒูุน ุงููุฒู ุญุณุจ ุงูุนูุงุฑ (18k, 21k, 22k, 24k)

#### โ ููุฎุต ุงูุจูุงูุงุช
ูุนุฑุถ ูู ุฃุนูู ุงูุดุงุดุฉ:
- **ุนุฏุฏ ุงูุญุฑูุงุช**: ุฅุฌูุงูู ุนุฏุฏ ุงููููุฏ ุงููุนุฑูุถุฉ
- **ุงูุฑุตูุฏ ุงูููุฏู ุงูููุงุฆู**: ุจุงูุฑูุงู ุงูุณุนูุฏู
- **ุฑุตูุฏ ุงูุฐูุจ ุงูููุงุฆู**: ุจุงูุฌุฑุงู (ุนูุงุฑ 21)
- **ุชูุงุตูู ุงูุฃุนูุฑุฉ**: ุฅุฐุง ุชู ุชูุนูู ุงูุฎูุงุฑ

#### โ ุนุฑุถ ุงูุญุฑูุงุช
ูู ููุฏ ูุนุฑุถ:
- ุงููุตู ูุงูุชุงุฑูุฎ
- ุงุณู ุงูุญุณุงุจ ูุฑููู
- ุงููุจุงูุบ ุงูููุฏูุฉ (ูุฏูู/ุฏุงุฆู)
- ุงูุฃูุฒุงู ุงูุฐูุจูุฉ (ูุฏูู/ุฏุงุฆู)
- **ุงูุฑุตูุฏ ุงูุชุฑุงููู**: ููุฏ ูุฐูุจ ุจุนุฏ ูู ุญุฑูุฉ
- **ุฌุฏูู ุงูุฃุนูุฑุฉ**: ุชูุฒูุน ููุตู ููุฃูุฒุงู

### ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

```dart
import 'package:flutter/material.dart';
import 'screens/general_ledger_screen_v2.dart';

// ูู ุฃู ููุงู ูู ุงูุชุทุจูู:
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => GeneralLedgerScreenV2(),
  ),
);
```

### ุฃูุซูุฉ ุนูู ุงูููุงุชุฑ

#### ูุซุงู 1: ุนุฑุถ ุญุฑูุงุช ุญุณุงุจ ูุฎุฒูู ุงูุฐูุจ ุนูุงุฑ 21
```dart
// ูู ุงูุดุงุดุฉุ ุงุถุบุท ุนูู ุฃููููุฉ "ุชุตููุฉ" (filter_list)
// ุงุฎุชุฑ ุงูุญุณุงุจ: "ูุฎุฒูู ุฐูุจ ุนูุงุฑ 21"
// ูุนูู ุฎูุงุฑ "ุนุฑุถ ุชูุงุตูู ุงูุฃุนูุฑุฉ"
// ุงุถุบุท "ุชุทุจูู"
```

#### ูุซุงู 2: ุนุฑุถ ุญุฑูุงุช ุดูุฑ ูุนูู
```dart
// ุงุถุบุท ุนูู "ุชุตููุฉ"
// ุงุฎุชุฑ "ูู ุชุงุฑูุฎ": 2025-01-01
// ุงุฎุชุฑ "ุฅูู ุชุงุฑูุฎ": 2025-01-31
// ุงุถุบุท "ุชุทุจูู"
```

## 2. ุฏูุชุฑ ุฃุณุชุงุฐ ูุญุณุงุจ ูุญุฏุฏ

### ุงููุณุงุฑ
```
ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ โ ุญุณุงุจุงุช ุงูุนููุงุก โ [ุงุฎุชุฑ ุนููู] โ ุฃููููุฉ ุงููุชุงุจ ๐
```

### ุงูููุฒุงุช

#### โ ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู
- ูุนุฑุถ ุงูุฑุตูุฏ **ูุจู** ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ุงููุญุฏุฏ
- ูููุฏ ููุนุฑูุฉ ุงููุถุน ุงููุงูู ูู ุจุฏุงูุฉ ุงููุชุฑุฉ
- ูุฏุนู ุงูููุฏ ูุงูุฐูุจ ูุน ุชูุงุตูู ุงูุฃุนูุฑุฉ

#### โ ุงูุญุฑูุงุช
- ุฌููุน ุงููููุฏ ุงูุฎุงุตุฉ ุจุงูุญุณุงุจ
- ูุฑุชุจุฉ ุญุณุจ ุงูุชุงุฑูุฎ
- **ุงูุฑุตูุฏ ุงูุชุฑุงููู** ุจุนุฏ ูู ุญุฑูุฉ
- ุฅููุงููุฉ ุงูููุฑ ุนูู ุฃู ุญุฑูุฉ ูุนุฑุถ ุชูุงุตูู ุงูุฃุนูุฑุฉ

#### โ ุงูุฑุตูุฏ ุงูุฎุชุงูู
- ูุนุฑุถ ุงูุฑุตูุฏ ุงูููุงุฆู **ุจุนุฏ** ุชุงุฑูุฎ ุงูููุงูุฉ
- ูุทุงุจู ุชูุงูุงู ููุฌููุน (ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู + ุงูุญุฑูุงุช)
- ูุฏุนู ุงูููุฏ ูุงูุฐูุจ ูุน ุชูุงุตูู ุงูุฃุนูุฑุฉ

#### โ ุงูุชุตููุฉ ุจุงูุชุงุฑูุฎ
- ุงุฎุชูุงุฑ ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ
- ุนุฑุถ/ุฅุฎูุงุก ุชูุงุตูู ุงูุฃุนูุฑุฉ
- ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุชุญุฏุซ ุชููุงุฆูุงู ุญุณุจ ุงูุชุงุฑูุฎ

### ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

```dart
import 'package:flutter/material.dart';
import 'screens/account_ledger_screen.dart';

// ุงูุชููู ูู ุดุงุดุฉ ุฃุฎุฑู:
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => AccountLedgerScreen(
      accountId: 7,              // ุฑูู ID ููุญุณุงุจ
      accountName: 'ุฃุญูุฏ ูุญูุฏ',  // ุงุณู ุงูุญุณุงุจ
    ),
  ),
);
```

### ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู

#### ุณููุงุฑูู: ูุญุต ุญุณุงุจ ุนููู ุฎูุงู ุดูุฑ ูุนูู

1. **ุงูุชูู ุฅูู** "ุญุณุงุจุงุช ุงูุนููุงุก"
2. **ุงุจุญุซ** ุนู ุงูุนููู (ูุซูุงู: ุฃุญูุฏ ูุญูุฏ)
3. **ุงุถุบุท** ุนูู ุฃููููุฉ ุงููุชุงุจ ๐ ุจุฌุงูุจ ุงุณู ุงูุนููู
4. **ุงุฎุชุฑ ุงููุชุฑุฉ**: ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุงุฑูุฎ ูุญุฏุฏ:
   - ูู: 2025-01-01
   - ุฅูู: 2025-01-31
5. **ุดุงูุฏ ุงููุชุงุฆุฌ**:
   - ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู (ูุง ูุจู ููุงูุฑ)
   - ุฌููุน ุงูุญุฑูุงุช ูู ููุงูุฑ
   - ุงูุฑุตูุฏ ุงูุฎุชุงูู (ููุงูุฉ ููุงูุฑ)

## 3. ุงูุชูุงูู ูุน ุดุงุดุฉ ุงูุญุณุงุจุงุช

ุชู ุชุญุฏูุซ `accounts_screen.dart` ูุฅุถุงูุฉ ุฒุฑ ุณุฑูุน ูุฏูุชุฑ ุงูุฃุณุชุงุฐ:

### ูุจู ุงูุชุญุฏูุซ
```dart
ListTile(
  title: Text(accountName),
  trailing: Icon(Icons.arrow_forward_ios),
  onTap: () => openAccountStatement(),
)
```

### ุจุนุฏ ุงูุชุญุฏูุซ
```dart
ListTile(
  title: Text(accountName),
  trailing: Row(
    children: [
      IconButton(
        icon: Icon(Icons.book),
        tooltip: 'ุฏูุชุฑ ุงูุฃุณุชุงุฐ',
        onPressed: () => openAccountLedger(),
      ),
      Icon(Icons.arrow_forward_ios),
    ],
  ),
  onTap: () => openAccountStatement(),
)
```

## 4. ุงูุงุฎุชูุงูุงุช ุจูู ุงูุดุงุดุชูู

| ุงูููุฒุฉ | ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู | ุฏูุชุฑ ุฃุณุชุงุฐ ุงูุญุณุงุจ |
|--------|-------------------|-------------------|
| ุงูุชุตููุฉ ุญุณุจ ุงูุญุณุงุจ | โ ุงุฎุชูุงุฑู | โ ูุซุจุช ุนูู ุญุณุงุจ ูุงุญุฏ |
| ุฑุตูุฏ ุงูุชุชุงุญู | โ ูุง ููุฌุฏ | โ ูุนุฑุถ |
| ุฑุตูุฏ ุฎุชุงูู | โ ูู ุงูููุฎุต | โ ุจุทุงูุฉ ูููุตูุฉ |
| ุญุฑูุงุช ูุชุนุฏุฏุฉ ุงูุญุณุงุจุงุช | โ ุฌููุน ุงูุญุณุงุจุงุช | โ ุญุณุงุจ ูุงุญุฏ ููุท |
| ุงูุชููู | ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ | ูู ุดุงุดุฉ ุงูุญุณุงุจุงุช |
| ุงูุงุณุชุฎุฏุงู ุงูุฃูุซู | ุชุญููู ุดุงูู | ุชุญููู ุญุณุงุจ ูุญุฏุฏ |

## 5. ูููู ุงูุจูุงูุงุช ุงููุณุชุฎุฏู

### ูู Backend API: `/api/general_ledger_all`

```json
{
  "entries": [
    {
      "id": 1,
      "date": "2025-01-15T10:30:00",
      "description": "ูุจูุนุงุช ุฐูุจ",
      "account_name": "ูุฎุฒูู ุฐูุจ ุนูุงุฑ 21",
      "account_number": "1-2-21",
      "cash_debit": 0,
      "cash_credit": 0,
      "gold_debit": 0,
      "gold_credit": 5.5,
      "running_balance": {
        "cash": 0,
        "gold_normalized": -5.5,
        "by_karat": {
          "18k": 0,
          "21k": -5.5,
          "22k": 0,
          "24k": 0
        }
      },
      "karat_details": {
        "21k": {
          "debit": 0,
          "credit": 5.5
        }
      }
    }
  ],
  "summary": {
    "total_entries": 1,
    "final_balance": {
      "cash": 0,
      "gold_normalized": -5.5,
      "by_karat": {
        "18k": 0,
        "21k": -5.5,
        "22k": 0,
        "24k": 0
      }
    }
  },
  "filters": {
    "account_id": 23,
    "start_date": null,
    "end_date": null
  }
}
```

### ูู Backend API: `/api/account_ledger/<id>`

```json
{
  "account": {
    "id": 7,
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "account_number": "3-1-001"
  },
  "opening_balance": {
    "cash": 1000.0,
    "gold_normalized": 2.5,
    "by_karat": {
      "18k": 0,
      "21k": 2.5,
      "22k": 0,
      "24k": 0
    }
  },
  "entries": [
    // ููุณ ูููู entries ุฃุนูุงู
  ],
  "closing_balance": {
    "cash": 1500.0,
    "gold_normalized": 1.2,
    "by_karat": {
      "18k": 0,
      "21k": 1.2,
      "22k": 0,
      "24k": 0
    }
  },
  "total_entries": 5
}
```

## 6. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุนุฏู ุชููุฑ ุงูุจูุงูุงุช
```dart
if (_ledgerData == null || _ledgerData!['entries'] == null) {
  return Center(child: Text('ูุง ุชูุฌุฏ ุจูุงูุงุช'));
}
```

### ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู
```dart
try {
  final data = await _apiService.getGeneralLedgerAll(...);
} catch (e) {
  setState(() {
    _errorMessage = 'ูุดู ุชุญููู ุฏูุชุฑ ุงูุฃุณุชุงุฐ: $e';
  });
}
```

ูุนุฑุถ:
- ุฃููููุฉ ุฎุทุฃ
- ุฑุณุงูุฉ ุงูุฎุทุฃ
- ุฒุฑ "ุฅุนุงุฏุฉ ุงููุญุงููุฉ"

## 7. ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช

### ูููุฉ ุงูุจูุงูุงุช
- ูุณุชุฎุฏู API pagination ุชููุงุฆูุงู ุฅุฐุง ุชุฌุงูุฒ ุนุฏุฏ ุงูุญุฑูุงุช 1000
- ุงูุชุตููุฉ ุญุณุจ ุงููุชุฑุฉ ุงูุฒูููุฉ ุชุญุณู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ

### ุงูุฐุงูุฑุฉ
- ุชุณุชุฎุฏู `ListView.builder` ูุชุญููู ุงูุนูุงุตุฑ ุนูุฏ ุงูุญุงุฌุฉ ููุท
- ูุง ูุชู ุชุญููู ุฌููุน ุงูุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ ุฏูุนุฉ ูุงุญุฏุฉ

### ุงูุชุญุฏูุซ
- Pull-to-refresh ูู ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู
- ุฒุฑ ุชุญุฏูุซ ูู ููุง ุงูุดุงุดุชูู

## 8. ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงูุชุทููุฑุงุช ุงูููุชุฑุญุฉ

1. **ุชุตุฏูุฑ ุงูุจูุงูุงุช**
   ```dart
   // ุฅุถุงูุฉ ุฒุฑ ูุชุตุฏูุฑ ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุฅูู PDF/Excel
   IconButton(
     icon: Icon(Icons.download),
     onPressed: () => exportToPDF(),
   )
   ```

2. **ุงูุทุจุงุนุฉ**
   ```dart
   // ุฏุนู ุงูุทุจุงุนุฉ ุงููุจุงุดุฑุฉ
   IconButton(
     icon: Icon(Icons.print),
     onPressed: () => printLedger(),
   )
   ```

3. **ุงูุฑุณูู ุงูุจูุงููุฉ**
   ```dart
   // ุนุฑุถ ุฑุณู ุจูุงูู ููุฃุฑุตุฏุฉ
   LineChart(
     data: ledgerBalances,
     xAxis: dates,
     yAxis: balances,
   )
   ```

4. **ุงูุจุญุซ ุงูุณุฑูุน**
   ```dart
   // ุฅุถุงูุฉ ุจุญุซ ูุตู ุฏุงุฎู ุงูุญุฑูุงุช
   TextField(
     decoration: InputDecoration(
       hintText: 'ุงุจุญุซ ูู ุงููุตู...',
     ),
     onChanged: (query) => filterEntries(query),
   )
   ```

## 9. ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

### ุณ: ููุงุฐุง ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุฎุชูู ุนู ุงููุชููุนุ
**ุฌ**: ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุญุณุจ ูู **ุฌููุน** ุงูุญุฑูุงุช ูุจู ุชุงุฑูุฎ ุงูุจุฏุงูุฉ. ุชุฃูุฏ ูู ุชุญุฏูุฏ ุงูุชุงุฑูุฎ ุงูุตุญูุญ.

### ุณ: ููู ุฃุนุฑู ุชูุฒูุน ุงููุฒู ุญุณุจ ุงูุนูุงุฑุ
**ุฌ**: ูุนูู ุฎูุงุฑ "ุนุฑุถ ุชูุงุตูู ุงูุฃุนูุฑุฉ" ูู ุงูููุชุฑ.

### ุณ: ููุงุฐุง ุงูุฃุฑุตุฏุฉ ุณุงูุจุฉ ุฃุญูุงูุงูุ
**ุฌ**: 
- **ุฑุตูุฏ ููุฏู ุณุงูุจ**: ูุนูู ุฃู ุงูุญุณุงุจ ุนููู ุฏูู
- **ุฑุตูุฏ ุฐูุจ ุณุงูุจ**: ูุนูู ุฃู ุงูุญุณุงุจ ูุฏูู ุจูุฒู ุฐูุจ (ูุซู ุงููุฎุฒูู ุนูุฏ ุงูุจูุน)

### ุณ: ูุง ุงููุฑู ุจูู "ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู" ู"ูุดู ุงูุญุณุงุจ"ุ
**ุฌ**: 
- **ุฏูุชุฑ ุงูุฃุณุชุงุฐ**: ูุนุฑุถ ุงููููุฏ ุงููุญุงุณุจูุฉ (ูุฏูู/ุฏุงุฆู)
- **ูุดู ุงูุญุณุงุจ**: ูุนุฑุถ ุงููุนุงููุงุช ุจุดูู ูุจุณุท (ูู/ุนููู)

## 10. ุงูุฏุนู ูุงูุชูุงุตู

ููุฅุจูุงุบ ุนู ูุดุงูู ุฃู ุงูุชุฑุงุญ ุชุญุณููุงุชุ ููุฑุฌู:
1. ุงูุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก ูู Console
2. ูุญุต ุงุชุตุงู Backend (ุชุฃูุฏ ูู ุชุดุบูู `python backend/app.py`)
3. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงูููุฑุณูุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-28  
**ุงูุฅุตุฏุงุฑ**: 2.0.0  
**ุงููุทูุฑ**: ูุฑูู Yasar Gold & Jewelry POS
