# ๐ ุฏููู ุนูููุฉ ุงูุชุฑุญูู (Posting Guide)

## ๐ ุงููุญุชููุงุช
1. [ุชุฑุญูู ูุงุชูุฑุฉ ูุงุญุฏุฉ](#1-ุชุฑุญูู-ูุงุชูุฑุฉ-ูุงุญุฏุฉ)
2. [ุชุฑุญูู ูุฌููุนุฉ ููุงุชูุฑ](#2-ุชุฑุญูู-ูุฌููุนุฉ-ููุงุชูุฑ)
3. [ุชุฑุญูู ููุฏ ูุงุญุฏ](#3-ุชุฑุญูู-ููุฏ-ูุงุญุฏ)
4. [ุชุฑุญูู ูุฌููุนุฉ ูููุฏ](#4-ุชุฑุญูู-ูุฌููุนุฉ-ูููุฏ)
5. [ุฅูุบุงุก ุงูุชุฑุญูู](#5-ุฅูุบุงุก-ุงูุชุฑุญูู)
6. [ุงูุชุญูู ูู ุงูุชุฑุญูู](#6-ุงูุชุญูู-ูู-ุงูุชุฑุญูู)

---

## 1๏ธโฃ ุชุฑุญูู ูุงุชูุฑุฉ ูุงุญุฏุฉ

### ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ:
```bash
curl -X POST http://localhost:8001/api/invoices/post/<ุฑูู_ุงููุงุชูุฑุฉ> \
  -H "Content-Type: application/json" \
  -d '{"posted_by":"ุงุณูู"}'
```

### ูุซุงู ุนููู:
```bash
# ุชุฑุญูู ูุงุชูุฑุฉ ุฑูู 18
curl -X POST http://localhost:8001/api/invoices/post/18 \
  -H "Content-Type: application/json" \
  -d '{"posted_by":"ุตุงูุญ ุงูุนุจุงุฏู"}'
```

### ุงููุงุชุฌ ุงููุชููุน:
```json
{
  "success": true,
  "message": "ุชู ุชุฑุญูู ุงููุงุชูุฑุฉ ุจูุฌุงุญ",
  "invoice": {
    "id": 18,
    "is_posted": true,
    "posted_at": "2025-11-10T01:40:40.856862",
    "posted_by": "ุตุงูุญ ุงูุนุจุงุฏู"
  }
}
```

---

## 2๏ธโฃ ุชุฑุญูู ูุฌููุนุฉ ููุงุชูุฑ

### ูุซุงู: ุชุฑุญูู ููุงุชูุฑ ููู ูุงูู
```bash
curl -X POST http://localhost:8001/api/invoices/post-batch \
  -H "Content-Type: application/json" \
  -d '{
    "invoice_ids": [17, 16, 15, 14, 13],
    "posted_by": "ุตุงูุญ ุงูุนุจุงุฏู"
  }'
```

### ุงููุงุชุฌ ุงููุชููุน:
```json
{
  "success": true,
  "message": "ุชู ุชุฑุญูู 5 ูุงุชูุฑุฉุ ุชู ุชุฎุทู 0",
  "posted_count": 5,
  "skipped_count": 0
}
```

### ููุงุญุธุงุช:
- โ ุงูููุงุชูุฑ ุงููุฑุญูุฉ ุจุงููุนู ุณูุชู ุชุฎุทููุง ุชููุงุฆูุงู
- โ ูู ูุชููู ุงูุชุฑุญูู ุนูุฏ ูุฌูุฏ ูุงุชูุฑุฉ ูุฑุญูุฉ

---

## 3๏ธโฃ ุชุฑุญูู ููุฏ ูุงุญุฏ

### ุงูุทุฑููุฉ ุงูุฃุณุงุณูุฉ:
```bash
curl -X POST http://localhost:8001/api/journal-entries/post/<ุฑูู_ุงูููุฏ> \
  -H "Content-Type: application/json" \
  -d '{"posted_by":"ุงุณูู"}'
```

### ูุซุงู ุนููู:
```bash
# ุชุฑุญูู ููุฏ ุฑูู 23
curl -X POST http://localhost:8001/api/journal-entries/post/23 \
  -H "Content-Type: application/json" \
  -d '{"posted_by":"ุตุงูุญ ุงูุนุจุงุฏู"}'
```

### ุงููุงุชุฌ ุงููุชููุน:
```json
{
  "success": true,
  "message": "ุชู ุชุฑุญูู ุงูููุฏ ุจูุฌุงุญ",
  "entry": {
    "id": 23,
    "entry_number": "JE-2025-00023",
    "is_posted": true,
    "posted_at": "2025-11-10T01:43:19.859682",
    "posted_by": "ุตุงูุญ ุงูุนุจุงุฏู"
  }
}
```

### โ๏ธ ุงูุชุญูู ูู ุงูุชูุงุฒู:
ุงููุธุงู ูุชุญูู ุชููุงุฆูุงู ูู:
- โ ุชูุงุฒู ุงูููุฏ (cash_debit = cash_credit)
- โ ุชูุงุฒู ูู ุนูุงุฑ ุฐูุจ (18k, 21k, 22k, 24k)

ุฅุฐุง ูุงู ุงูููุฏ ุบูุฑ ูุชูุงุฒูุ ุณุชุญุตู ุนูู ุฑุณุงูุฉ ุฎุทุฃ:
```json
{
  "success": false,
  "message": "ุงูููุฏ ุบูุฑ ูุชูุงุฒู (ููุฏ). ูุฏูู: 1000, ุฏุงุฆู: 900"
}
```

---

## 4๏ธโฃ ุชุฑุญูู ูุฌููุนุฉ ูููุฏ

### ูุซุงู: ุชุฑุญูู ูููุฏ ุฏูุฑูุฉ
```bash
curl -X POST http://localhost:8001/api/journal-entries/post-batch \
  -H "Content-Type: application/json" \
  -d '{
    "entry_ids": [23, 24, 25, 26],
    "posted_by": "ุตุงูุญ ุงูุนุจุงุฏู"
  }'
```

### ุงููุงุชุฌ ุงููุชููุน:
```json
{
  "success": true,
  "message": "ุชู ุชุฑุญูู 3 ููุฏุ ุชู ุชุฎุทู 1",
  "posted_count": 3,
  "skipped_count": 1,
  "errors": ["ุงูููุฏ JE-2025-00025 ุบูุฑ ูุชูุงุฒู (ููุฏ)"]
}
```

---

## 5๏ธโฃ ุฅูุบุงุก ุงูุชุฑุญูู

### โ๏ธ ุชุญุฐูุฑ: ุงุณุชุฎุฏู ุจุญุฐุฑ!

### ุฅูุบุงุก ุชุฑุญูู ูุงุชูุฑุฉ:
```bash
curl -X POST http://localhost:8001/api/invoices/unpost/18
```

### ุฅูุบุงุก ุชุฑุญูู ููุฏ:
```bash
curl -X POST http://localhost:8001/api/journal-entries/unpost/23
```

### ูุชู ุชุณุชุฎุฏู ุฅูุบุงุก ุงูุชุฑุญููุ
- โ ุงูุชุดุงู ุฎุทุฃ ูู ุงูุจูุงูุงุช ุจุนุฏ ุงูุชุฑุญูู
- โ ุงูุญุงุฌุฉ ูุชุนุฏูู ูุงุชูุฑุฉ/ููุฏ ูุฑุญูู
- โ **ูุง ุชุณุชุฎุฏูู ุจุดูู ุนุดูุงุฆู!**

### ุงูุนูููุฉ ุงูุตุญูุญุฉ:
```
1. ุฅูุบุงุก ุงูุชุฑุญูู (unpost)
2. ุชุนุฏูู ุงูุจูุงูุงุช
3. ุฅุนุงุฏุฉ ุงูุชุฑุญูู (post)
```

---

## 6๏ธโฃ ุงูุชุญูู ูู ุงูุชุฑุญูู

### ุฃ) ุงูุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ:
```bash
curl http://localhost:8001/api/posting/stats | python3 -m json.tool
```

**ุงููุงุชุฌ:**
```json
{
  "success": true,
  "stats": {
    "invoices": {
      "total": 19,
      "posted": 5,
      "unposted": 14
    },
    "journal_entries": {
      "total": 40,
      "posted": 1,
      "unposted": 39
    }
  }
}
```

### ุจ) ูุงุฆูุฉ ุงูููุงุชูุฑ ุงููุฑุญูุฉ:
```bash
curl http://localhost:8001/api/invoices/posted
```

### ุฌ) ูุงุฆูุฉ ุงูููุงุชูุฑ ุบูุฑ ุงููุฑุญูุฉ:
```bash
curl http://localhost:8001/api/invoices/unposted
```

### ุฏ) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ:
```bash
sqlite3 -header -column backend/app.db "
SELECT 
  id as 'ID',
  invoice_type as 'ุงูููุน',
  total as 'ุงููุจูุบ',
  posted_by as 'ุฑุญููู',
  substr(posted_at, 12, 5) as 'ุงูุณุงุนุฉ',
  substr(posted_at, 1, 10) as 'ุงูุชุงุฑูุฎ'
FROM invoice 
WHERE is_posted = 1
ORDER BY posted_at DESC
LIMIT 10;
"
```

**ุงููุงุชุฌ:**
```
ID  ุงูููุน  ุงููุจูุบ      ุฑุญููู         ุงูุณุงุนุฉ  ุงูุชุงุฑูุฎ   
--  -----  ----------  ------------  ------  ----------
17  ุจูุน    5000.0      ุตุงูุญ ุงูุนุจุงุฏู  01:40   2025-11-10
16  ุจูุน    4030.77     ุตุงูุญ ุงูุนุจุงุฏู  01:40   2025-11-10
15  ูุฑุชุฌุน  4030.77     ุตุงูุญ ุงูุนุจุงุฏู  01:40   2025-11-10
```

### ูู) ุจุงุณุชุฎุฏุงู ุณูุฑูุจุช ุงููุญุต ุงูุณุฑูุน:
```bash
cd backend
./check_posting_status.sh
```

---

## ๐ ุณููุงุฑูููุงุช ุนูููุฉ

### ุงูุณููุงุฑูู 1: ุชุฑุญูู ููุงุชูุฑ ููุงูุฉ ุงูููู

```bash
# 1. ุงุญุตู ุนูู ุงูููุงุชูุฑ ุบูุฑ ุงููุฑุญูุฉ
curl http://localhost:8001/api/invoices/unposted | python3 -m json.tool > unposted.json

# 2. ุฑุงุฌุน ุงูุจูุงูุงุช (ุชุฃูุฏ ูู ุตุญุชูุง)
cat unposted.json

# 3. ุฑุญูู ุงูููุงุชูุฑ ุฏูุนุฉ ูุงุญุฏุฉ
curl -X POST http://localhost:8001/api/invoices/post-batch \
  -H "Content-Type: application/json" \
  -d '{
    "invoice_ids": [15, 16, 17, 18, 19],
    "posted_by": "ูุญุงุณุจ ุงููุณุงุก"
  }'

# 4. ุชุญูู ูู ุงููุชุงุฆุฌ
curl http://localhost:8001/api/posting/stats
```

### ุงูุณููุงุฑูู 2: ุชุฑุญูู ูููุฏ ุฏูุฑูุฉ ุดูุฑูุงู

```bash
# 1. ุงุญุตู ุนูู ุงููููุฏ ุงูุฏูุฑูุฉ ุบูุฑ ุงููุฑุญูุฉ
curl http://localhost:8001/api/journal-entries/unposted | \
  python3 -c "
import sys, json
data = json.load(sys.stdin)
recurring_entries = [e for e in data['entries'] if e['entry_type'] == 'ุฏูุฑู']
print(f'ุนุฏุฏ ุงููููุฏ ุงูุฏูุฑูุฉ: {len(recurring_entries)}')
for e in recurring_entries:
    print(f\"  โข {e['entry_number']}: {e['description']}\")
"

# 2. ุฑุญูู ุงููููุฏ ุงูุฏูุฑูุฉ
curl -X POST http://localhost:8001/api/journal-entries/post-batch \
  -H "Content-Type: application/json" \
  -d '{
    "entry_ids": [23, 24, 25],
    "posted_by": "ูุญุงุณุจ ุงูุฃุตูู"
  }'
```

### ุงูุณููุงุฑูู 3: ุชุตุญูุญ ุฎุทุฃ

```bash
# 1. ุงูุชุดุงู ุฎุทุฃ ูู ูุงุชูุฑุฉ ูุฑุญูุฉ
# ูุงุชูุฑุฉ ุฑูู 18 ุจูุง ุฎุทุฃ ูู ุงููุจูุบ

# 2. ุฅูุบุงุก ุงูุชุฑุญูู
curl -X POST http://localhost:8001/api/invoices/unpost/18

# 3. ุชุนุฏูู ุงููุงุชูุฑุฉ
curl -X PUT http://localhost:8001/api/invoices/18 \
  -H "Content-Type: application/json" \
  -d '{"total": 5000}'

# 4. ุฅุนุงุฏุฉ ุงูุชุฑุญูู
curl -X POST http://localhost:8001/api/invoices/post/18 \
  -H "Content-Type: application/json" \
  -d '{"posted_by":"ุตุงูุญ ุงูุนุจุงุฏู - ุชุตุญูุญ"}'
```

---

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

### โ ุงูุนู:
1. **ุฑุงุฌุน ูุจู ุงูุชุฑุญูู** - ุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช
2. **ุฑุญูู ููููุงู** - ูุง ุชุชุฑุงูู ุงููุนุงููุงุช
3. **ุงุณุชุฎุฏู ุฃุณูุงุก ูุงุถุญุฉ** - "ูุญูุฏ ุฃุญูุฏ - ูุญุงุณุจ" ุจุฏูุงู ูู "user1"
4. **ุงุญุชูุธ ุจุณุฌู** - ูุซู ูุชู ููุงุฐุง ุฑุญููุช
5. **ุงุณุชุฎุฏู Batch ูููุฌููุนุงุช** - ุฃุณุฑุน ูุฃูุซุฑ ููุงุกุฉ

### โ ูุง ุชูุนู:
1. **ูุง ุชุฑุญูู ุจุฏูู ูุฑุงุฌุนุฉ** - ูุฏ ูููู ููุงู ุฃุฎุทุงุก
2. **ูุง ุชูุบู ุงูุชุฑุญูู ุจุดูู ุนุดูุงุฆู** - ููุท ููุชุตุญูุญุงุช ุงูุถุฑูุฑูุฉ
3. **ูุง ุชุณุชุฎุฏู ุฃุณูุงุก ุบูุฑ ูุงุถุญุฉ** - "user123" ุบูุฑ ูููุฏ
4. **ูุง ุชุชุฑู ูุนุงููุงุช ุฏูู ุชุฑุญูู ููุชุฑุฉ ุทูููุฉ** - ูุตุนุจ ุงููุชุงุจุนุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "ุงููุงุชูุฑุฉ ูุฑุญูุฉ ุจุงููุนู"
**ุงูุญู:** ุงููุงุชูุฑุฉ ุชู ุชุฑุญูููุง ูุณุจูุงู. ุงุณุชุฎุฏู `/api/invoices/unpost/` ุฅุฐุง ููุช ุชุฑูุฏ ุฅูุบุงุก ุงูุชุฑุญูู.

### ุฎุทุฃ: "ุงูููุฏ ุบูุฑ ูุชูุงุฒู"
**ุงูุญู:** ุฑุงุฌุน ุฃุณุทุฑ ุงูููุฏ ูุชุฃูุฏ ูู ุชุณุงูู ุงููุฏูู ูุงูุฏุงุฆู.

### ุฎุทุฃ: "ุงูููุฏ ูุญุฐูู"
**ุงูุญู:** ุงุณุชุฑุฌุน ุงูููุฏ ุฃููุงู ูุจู ูุญุงููุฉ ุงูุชุฑุญูู.

---

## ๐ ุงููููุงุช ุงููุฑุฌุนูุฉ

- **ุฏููู ุงููุธุงู ุงููุงูู:** `backend/POSTING_SYSTEM_GUIDE.md`
- **ููู ุชูุงุญุธ ุงูุชุบููุฑุงุช:** `HOW_TO_CHECK_POSTING_CHANGES.md`
- **API Code:** `backend/posting_routes.py`
- **ุณูุฑูุจุช ุงููุญุต:** `backend/check_posting_status.sh`

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ุงูุชูุซูู ูู `backend/POSTING_SYSTEM_GUIDE.md`
- ุงูุญุต logs ุงูุณูุฑูุฑ
- ุงุณุชุฎุฏู `/api/posting/stats` ููุชุดุฎูุต

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-11-10  
**ุงูุฅุตุฏุงุฑ:** 1.0
