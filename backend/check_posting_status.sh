#!/bin/bash
# Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø­ÙŠÙ„

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "     ğŸ“Š Ù…Ù„Ø®Øµ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø­ÙŠÙ„"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# 1. Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
echo "ğŸ”¢ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:"
curl -s http://localhost:8001/api/posting/stats | python3 -c "
import sys, json
data = json.load(sys.stdin)
inv = data['stats']['invoices']
jrn = data['stats']['journal_entries']
print(f'   Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {inv[\"posted\"]} Ù…Ø±Ø­Ù‘Ù„Ø© Ù…Ù† Ø£ØµÙ„ {inv[\"total\"]} ({inv[\"unposted\"]} ØºÙŠØ± Ù…Ø±Ø­Ù‘Ù„Ø©)')
print(f'   Ø§Ù„Ù‚ÙŠÙˆØ¯: {jrn[\"posted\"]} Ù…Ø±Ø­Ù‘Ù„Ø© Ù…Ù† Ø£ØµÙ„ {jrn[\"total\"]} ({jrn[\"unposted\"]} ØºÙŠØ± Ù…Ø±Ø­Ù‘Ù„Ø©)')
"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "     âœ… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

curl -s http://localhost:8001/api/invoices/posted | python3 -c "
import sys, json
data = json.load(sys.stdin)
if data['count'] == 0:
    print('   Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙˆØ§ØªÙŠØ± Ù…Ø±Ø­Ù„Ø©')
else:
    for inv in data['invoices']:
        print(f\"   Ø±Ù‚Ù… {inv['id']} | {inv['invoice_type']} | {inv['total']} Ø±.Ø³\")
        print(f\"   â†³ Ø±ÙØ­Ù‘Ù„Øª Ø¨ØªØ§Ø±ÙŠØ®: {inv['posted_at'][:19]}\")
        print(f\"   â†³ Ø¨ÙˆØ§Ø³Ø·Ø©: {inv['posted_by']}\")
        print()
"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "     â³ Ø§Ù„ÙÙˆØ§ØªÙŠØ± ØºÙŠØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

curl -s http://localhost:8001/api/invoices/unposted | python3 -c "
import sys, json
data = json.load(sys.stdin)
if data['count'] == 0:
    print('   Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ù…Ø±Ø­Ù„Ø© âœ…')
else:
    print(f\"   Ø¹Ø¯Ø¯: {data['count']} ÙØ§ØªÙˆØ±Ø©\")
    for inv in data['invoices'][:5]:
        print(f\"   â€¢ Ø±Ù‚Ù… {inv['id']} | {inv['invoice_type']} | {inv['total']} Ø±.Ø³\")
    if data['count'] > 5:
        print(f\"   ... Ùˆ {data['count'] - 5} ÙØ§ØªÙˆØ±Ø© Ø£Ø®Ø±Ù‰\")
"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
