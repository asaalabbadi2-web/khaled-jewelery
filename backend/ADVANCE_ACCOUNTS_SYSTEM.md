# ูุธุงู ุญุณุงุจุงุช ุงูุณูู ุงูุชูุตูููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ **ูุธุงู ุญุณุงุจุงุช ุงูุณูู ุงูุชูุตูููุฉ** ูุชุชุจุน ุฏููู ูุณูู ูู ููุธู ุนูู ุญุฏุฉุ ููุง ูููุฑ:
- **ุญุณุงุจ ุณููุฉ ูุณุชูู** ููู ููุธู
- **ุฑุจุท ุชููุงุฆู** ุจูู ุญุณุงุจ ุงูุณููุฉ ูุญุณุงุจ ุงูููุธู ุงูุดุฎุตู
- **ุชูุงุฑูุฑ ุฏูููุฉ** ููุณูู ุงููุณุชุญูุฉ ููู ููุธู
- **ูุชุงุจุนุฉ ุณููุฉ** ููุตุฑู ูุงูุงุณุชุฑุฏุงุฏ

---

## ๐๏ธ ุงููููู ุงูุญุณุงุจู

### ุงูุญุณุงุจุงุช ุงูุชุฌููุนูุฉ ูุงูุชูุตูููุฉ

```
1400 - ุณูู ููุธููู (ุญุณุงุจ ุชุฌููุนู)
  โ
  โโโ 140000 - ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
  โ     โโ ูุฑุชุจุท ุจู: 130000 (ุญุณุงุจ ุฃุญูุฏ ุงูุดุฎุตู)
  โ
  โโโ 140001 - ุณููุฉ ูุงุทูุฉ ุนูู ุญุณู
  โ     โโ ูุฑุชุจุท ุจู: 130001 (ุญุณุงุจ ูุงุทูุฉ ุงูุดุฎุตู)
  โ
  โโโ 140002 - ุณููุฉ ุฎุงูุฏ ุณุนูุฏ ูุญููุฏ
  โ     โโ ูุฑุชุจุท ุจู: 130002 (ุญุณุงุจ ุฎุงูุฏ ุงูุดุฎุตู)
  โ
  โโโ ... (ุญุชู 149999 - ุณุนุฉ 10,000 ุณููุฉ)
```

### ุงูุนูุงูุงุช:
- ูู **ุญุณุงุจ ุณููุฉ (140xxx)** ูุฑุชุจุท ุจู **ููุธู ูุงุญุฏ ููุท**
- ูู **ููุธู (130xxx)** ูููู ุฃู ูููู ูู **ุญุณุงุจ ุณููุฉ ูุงุญุฏ (140xxx)**
- **ุงูุญุณุงุจ ุงูุชุฌููุนู (1400)** ููุณุชุฎุฏู ููุชูุงุฑูุฑ ุงูููุฌููุนุฉ ููุท

---

## ๐ ุฎุทูุงุช ุงูุชูุนูู

### 1. ุฅูุดุงุก ุงูุญุณุงุจุงุช ุงูุชุฌููุนูุฉ

```bash
cd backend
source venv/bin/activate
python seed_employee_accounts.py --create
```

**ุงููุชูุฌุฉ:**
```
โ ุชู ุฅูุดุงุก ุญุณุงุจ: 1400 - ุณูู ููุธููู (ุชุฌููุนู)
๐ก ููุงุญุธุฉ: ุญุณุงุจุงุช ุงูุณูู ุงูุชูุตูููุฉ (140000-149999)
   ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุตุฑู ุณููุฉ ูููุธู
```

### 2. ุงุฎุชุจุงุฑ ุงููุธุงู

```bash
python test_advance_accounts.py --test
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐งช ุงุฎุชุจุงุฑ ูุธุงู ุญุณุงุจุงุช ุงูุณูู ุงูุชูุตูููุฉ
๐ ุจูุงูุงุช ุงูููุธู:
   ุงูุงุณู: ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
   ุงูููุฏ: EMP-2025-0001
   ุงูุญุณุงุจ ุงูุดุฎุตู: 130000 - ุญ/ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ

๐ง ุฅูุดุงุก ุญุณุงุจ ุณููุฉ ููููุธู...
โ ุชู ุฅูุดุงุก ุญุณุงุจ ุงูุณููุฉ:
   ุฑูู ุงูุญุณุงุจ: 140000
   ุงุณู ุงูุญุณุงุจ: ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
   ุงูููุงุญุธุงุช: ุญุณุงุจ ุณููุฉ ููููุธู ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ (ุฑูู ุงูููุธู: EMP-2025-0001ุ ุงูุญุณุงุจ ุงูุดุฎุตู: 130000)

๐ ุฑุตูุฏ ุงูุณููุฉ ุงูุญุงูู:
   ุงูุญุณุงุจ: 140000 - ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
   ุงูุฑุตูุฏ: 0.00 ุฑูุงู
```

### 3. ุนุฑุถ ูุงุฆูุฉ ุญุณุงุจุงุช ุงูุณูู

```bash
python test_advance_accounts.py --list
```

---

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### 1. ุงูุญุตูู ุนูู ุญุณุงุจ ุณููุฉ ููุธู

```http
GET /api/employees/{employee_id}/advance-account
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "account_id": 145,
  "account_number": "140000",
  "account_name": "ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ",
  "balance": 2000.00,
  "has_account": true
}
```

### 2. ุฅูุดุงุก ุญุณุงุจ ุณููุฉ ูููุธู

```http
POST /api/employees/{employee_id}/advance-account
Content-Type: application/json

{
  "created_by": "admin"
}
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "account_id": 145,
  "account_number": "140000",
  "account_name": "ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ",
  "employee_id": 1
}
```

### 3. ููุฎุต ุฌููุน ุงูุณูู ุงููุณุชุญูุฉ

```http
GET /api/advances/summary
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "advances": [
    {
      "advance_account_id": 145,
      "advance_account_number": "140000",
      "advance_account_name": "ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ",
      "balance": 2000.00,
      "employee_code": "EMP-2025-0001",
      "employee_account": "130000",
      "created_at": "2025-11-01T10:00:00"
    },
    {
      "advance_account_id": 146,
      "advance_account_number": "140001",
      "advance_account_name": "ุณููุฉ ูุงุทูุฉ ุนูู ุญุณู",
      "balance": 1500.00,
      "employee_code": "EMP-2025-0002",
      "employee_account": "130001",
      "created_at": "2025-11-02T14:30:00"
    }
  ],
  "total_outstanding": 3500.00,
  "count": 2
}
```

---

## ๐ผ ุงุณุชุฎุฏุงู ุงููุธุงู ูู ุงูุณูุฏุงุช

### ุณููุงุฑูู ูุงูู: ุตุฑู ุณููุฉ ูุงุณุชุฑุฏุงุฏูุง

#### 1. ุฅูุดุงุก ุญุณุงุจ ุงูุณููุฉ (ุชููุงุฆู ุฃู ูุฏูู)

**ุฃ) ุชููุงุฆู ูู ุฃูู ุณูุฏ ุตุฑู:**
- ุนูุฏ ุตุฑู ุณููุฉ ูููุธู ููุณ ูู ุญุณุงุจ ุณููุฉ
- ุงููุธุงู ูููุดุฆ ุญุณุงุจ ุงูุณููุฉ ุชููุงุฆูุงู

**ุจ) ูุฏูู ูุจู ุงูุณูุฏ:**
```bash
curl -X POST http://localhost:8001/api/employees/1/advance-account \
  -H "Content-Type: application/json" \
  -d '{"created_by": "admin"}'
```

#### 2. ุณูุฏ ุตุฑู ุงูุณููุฉ

**ูู `add_voucher_screen.dart`:**
- **ููุน ุงูุณูุฏ:** ุณูุฏ ุตุฑู (payment)
- **ููุน ุงูุทุฑู:** ุขุฎุฑ (other)
- **ุงุฎุชุฑ ุงูุญุณุงุจ:** 140000 - ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
- **ุงูุฎุฒููุฉ:** ุงูุฎุฒููุฉ ุงูููุฏูุฉ (1000)
- **ุงููุจูุบ:** 2000 ุฑูุงู
- **ุงูุจูุงู:** ุตุฑู ุณููุฉ ููููุธู ุฃุญูุฏ
- **ุงุณู ุงููุณุชูู:** ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ

**ุงูููุฏ ุงููููุดุฃ:**
```
ูู ุญ/ 140000 - ุณููุฉ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ    2000 ุฑูุงู   (ูุฏูู)
     ุฅูู ุญ/ 1000 - ุงูุฎุฒููุฉ ุงูููุฏูุฉ       2000 ุฑูุงู   (ุฏุงุฆู)

ุงูุจูุงู: ุตุฑู ุณููุฉ ููููุธู ุฃุญูุฏ
```

#### 3. ุงุณุชุฑุฏุงุฏ ุงูุณููุฉ (ูู ุงูุฑุงุชุจ)

**ุฃ) ููุฏ ุฎุตู ุงูุณููุฉ:**
```
ูู ุญ/ 130000 - ุญ/ ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ       2000 ุฑูุงู   (ูุฏูู)
     ุฅูู ุญ/ 140000 - ุณููุฉ ุฃุญูุฏ           2000 ุฑูุงู   (ุฏุงุฆู)

ุงูุจูุงู: ุฎุตู ุณููุฉ ูู ุฑุงุชุจ ููููุจุฑ
```

**ุจ) ุฃู ุงุณุชุฑุฏุงุฏ ููุฏู (ุณูุฏ ูุจุถ):**
```
ูู ุญ/ 1000 - ุงูุฎุฒููุฉ ุงูููุฏูุฉ            2000 ุฑูุงู   (ูุฏูู)
     ุฅูู ุญ/ 140000 - ุณููุฉ ุฃุญูุฏ           2000 ุฑูุงู   (ุฏุงุฆู)

ุงูุจูุงู: ุงุณุชุฑุฏุงุฏ ุณููุฉ ูู ุงูููุธู ุฃุญูุฏ
```

---

## ๐ ูุซุงู ุนููู ูุงูู

### ุงูููุธู: ุฃุญูุฏ ูุญูุฏ ุงูุณุนูุฏ
- **ุงูุญุณุงุจ ุงูุดุฎุตู:** 130000
- **ุญุณุงุจ ุงูุณููุฉ:** 140000
- **ุงูุฑุงุชุจ ุงูุดูุฑู:** 5000 ุฑูุงู

### ุงูุญุฑูุงุช ุฎูุงู ุงูุดูุฑ:

| ุงูุชุงุฑูุฎ | ุงูููุฏ | ุงููุตู | 140000 (ุณููุฉ) | 130000 (ุดุฎุตู) | 1000 (ุฎุฒููุฉ) |
|---------|------|-------|----------------|----------------|---------------|
| 2025-11-01 | ุฑุตูุฏ ุฃูู ุงููุฏุฉ | - | 0 | 0 | - |
| 2025-11-05 | ุตุฑู ุณููุฉ | ูู ุญ/ 140000 ุฅูู ุญ/ 1000 | +2000 (ูุฏูู) | - | -2000 (ุฏุงุฆู) |
| 2025-11-30 | ุงุณุชุญูุงู ุฑุงุชุจ | ูู ุญ/ 5000 ุฅูู ุญ/ 130000 | - | +5000 (ุฏุงุฆู) | - |
| 2025-11-30 | ุฎุตู ุณููุฉ | ูู ุญ/ 130000 ุฅูู ุญ/ 140000 | -2000 (ุฏุงุฆู) | +2000 (ูุฏูู) | - |
| 2025-11-30 | ุตุฑู ุตุงูู ุฑุงุชุจ | ูู ุญ/ 130000 ุฅูู ุญ/ 1000 | - | +3000 (ูุฏูู) | -3000 (ุฏุงุฆู) |
| **ุงูุฑุตูุฏ ุงูููุงุฆู** | - | - | **0** โ | **0** โ | **-5000** โ |

**โ ุฌููุน ุงูุญุณุงุจุงุช ูุชูุงุฒูุฉ**

---

## ๐ฏ ุงูููุงุฆุฏ

### 1. ุชุชุจุน ุฏููู
- ุฑุตูุฏ ุณููุฉ ูู ููุธู **ูููุตู ููุณุชูู**
- ุณูููุฉ ูุนุฑูุฉ **ูู ูู ุณููุฉ ูุณุชุญูุฉ**

### 2. ุชูุงุฑูุฑ ูุงุถุญุฉ
```sql
-- ุชูุฑูุฑ ุณูู ููุธู ูุญุฏุฏ
SELECT * FROM journal_entry_line 
WHERE account_id IN (
  SELECT id FROM account 
  WHERE account_number = '140000'
);

-- ุชูุฑูุฑ ุฌููุน ุงูุณูู
SELECT * FROM journal_entry_line 
WHERE account_id IN (
  SELECT id FROM account 
  WHERE account_number LIKE '1400%'
);
```

### 3. ุชูุงูู ูุน ุงูุฑูุงุชุจ
- ุฎุตู ุงูุณููุฉ ุชููุงุฆูุงู ูู ุงูุฑุงุชุจ
- ุฑุจุท ูุงุถุญ ุจูู ุงูุณููุฉ ูุงูููุธู

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุทุฃ: "ุงูููุธู ููุณ ูู ุญุณุงุจ ุดุฎุตู"

**ุงูุณุจุจ:** ุงูููุธู ุบูุฑ ูุฑุชุจุท ุจุญุณุงุจ ูู ุดุฌุฑุฉ ุงูุญุณุงุจุงุช

**ุงูุญู:**
```bash
# ุชุญุฏูุซ ุงูููุธู ููููู ูู ุญุณุงุจ
PUT /api/employees/{employee_id}
{
  "account_id": 130000
}
```

### ุงูุฎุทุฃ: "ุงูุญุณุงุจ ุงูุชุฌููุนู ููุณูู ุบูุฑ ููุฌูุฏ"

**ุงูุญู:**
```bash
python seed_employee_accounts.py --create
```

### ุงูุฎุทุฃ: "ุชุฌุงูุฒุช ุงูุณุนุฉ ุงููุชุงุญุฉ"

**ุงูุณุจุจ:** ุชู ุฅูุดุงุก 10,000 ุญุณุงุจ ุณููุฉ (ุงูุญุฏ ุงูุฃูุตู)

**ุงูุญู:**
- ุญุฐู ุญุณุงุจุงุช ุงูุณูู ุงูููุณุฏุฏุฉ ูุงููุฏููุฉ
- ุฃู ุชูุณูุน ุงููุทุงู ูู ุงูููุฏ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุญุณุงุจ ุณููุฉ ูุงุญุฏ ููู ููุธู:**
   - ุฅุฐุง ูุงู ููููุธู ุณููุฉ ูุงุฆูุฉุ ูุฌุจ ุณุฏุงุฏูุง ุฃููุงู
   - ุฃู ุฏูุฌ ุงูุณูู ุงูุฌุฏูุฏุฉ ูู ููุณ ุงูุญุณุงุจ

2. **ูุง ุชุณุชุฎุฏู ุงูุญุณุงุจ ุงูุชุฌููุนู ูู ุงููููุฏ:**
   - โ ูู ุญ/ 1400 (ุฎุทุฃ)
   - โ ูู ุญ/ 140000 (ุตุญูุญ)

3. **ุงูุฑุจุท ุงูุชููุงุฆู:**
   - ุงููุธุงู ูุญูุธ ุฑูู ุงูููุธู ูู ููุงุญุธุงุช ุญุณุงุจ ุงูุณููุฉ
   - ูููู ุงูุจุญุซ ุนู ุณูู ููุธู ุนุจุฑ ููุฏู

4. **ุงูุชูุงุฑูุฑ:**
   - **ุชูุฑูุฑ ููุธู:** ุงุณุชุฎุฏู ุญุณุงุจ ุงูุณููุฉ (140000)
   - **ุชูุฑูุฑ ุฅุฌูุงูู:** ุงุณุชุฎุฏู ุงูุญุณุงุจ ุงูุชุฌููุนู (1400)

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

- [x] ุฅูุดุงุก ูุธุงู ุญุณุงุจุงุช ุงูุณูู ุงูุชูุตูููุฉ
- [x] API endpoints ููุณูู
- [x] ุณูุฑูุจุช ุงุฎุชุจุงุฑ
- [ ] ุชุญุฏูุซ ุดุงุดุฉ ุงูุณูุฏุงุช ูู Flutter ูุนุฑุถ ุญุณุงุจุงุช ุงูุณูู
- [ ] ุชุญุฏูุซ ุดุงุดุฉ ุงูููุธููู ูุนุฑุถ ุฑุตูุฏ ุงูุณููุฉ
- [ ] ุชูุฑูุฑ ููุตูู ููุณูู ุงููุณุชุญูุฉ
- [ ] ุชูุงูู ูุน ูุธุงู ุงูุฑูุงุชุจ ููุฎุตู ุงูุชููุงุฆู
